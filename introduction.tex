\chapter{Introduction}

Anyone who ever moved places knows the amazing difference between the sound of talking inside an empty room
as opposed to talking in that same room once it's filled with furniture.
Acoustics as a field has long been dedicated to exploring these kinds of differences,
as well as developing methods to ensure that a room's acoustics fit its purpose.
\newline
As with all fields, software tools have been developed to aid in adjusting a room's acoustics.
Several methods have been developed that allow an engineer to simulate the sound of a planned room before building and furnishing it,
letting them check whether the acoustics hold up to their intended requirements.
\newline
The two most common methods of simulation are numeric and geometric approaches.
Numeric approaches work by getting the equation representing the wave's propagation in the room,
then calculating a solution to it numerically.
This leads to the most accurate results, but has a high computation cost attached to it,
making it less viable for real-world uses.
\newline
Geometric methods instead model a sound wave as a large set of individual rays originating from the same spot,
then simulate them bouncing through the room,
similarly to how light is modelled in graphics ray tracers.
This works fine for sounds at small wave lengths/high frequencies,
but introduces errors for lower frequencies as a sound's wave properties are entirely discarded.
In turn, geometric methods are much faster than numeric approaches,
to a point where a room's acoustics can be simulated in real time~\cite{Cha08}.
At time of writing, most commercially available acoustics simulation tools use ray tracing or similar geometric methods~\cite{Th17}.
\newline
Both of these methods can of course also be used to simulate entirely hypothetical rooms without any intent to build them,
or rooms that can't exist in the real world to begin with,
which can help physicists study properties of these theoretical places that can then be applied to real ones.
\newline
An example for a case that would be interesting to study but near impossible to measure in real life
would be the acoustics of a rapidly rotating room.
In order to differ from the echo the room creates while static,
the room's rotation would need to reach a velocity at least one order of magnitude below the speed of sound.
Building such a rotating room in the real world may be possible at a small scale,
but becomes exponentially harder the bigger the room gets.
\newline
In order to simulate such a room, the simulation would need to be able to account for
the walls of the room moving while the sound wave itself is traversing the scene.
This is mostly unexplored thus far.
Bilibashi et al.~\cite{BVD20} have explored simulating rays bouncing between a set of moving points, namely cars,
but their approach is not viable for a full room acoustics simulation.
\newline
Existing simulations have only concerned themselves with static scenes.
For dynamic scenes, existing tools such as EAR~\cite{Kr17} and research such as that by Chandak et al.~\cite{Cha08}
work around having to account for movement by taking a static version of the scene at a given time
and bouncing rays through that instead,
then repeating this process for every point in time at which acoustics are simulated.
\newline
This works well in most cases, but leads to problems when objects in the room move fast enough
that the distance they would travel in the time a ray is bouncing through the scene becomes significant.
To start alleviating this problem,
this thesis aims to create a new way to simulate bouncing rays through a moving room without errors introduced by the older approach.

\section{Scope of This Thesis}\label{sec:Scope}

This thesis proposes a method to simulate rays bouncing through arbitrary scenes with moving receivers and/or objects,
assuming all movement within the scene is known at time of calculation.
An improved way of checking for intersections between rays and objects is developed, accommodating for this new requirement.
\newline
Optimisations are evaluated and a time-based chunking method is developed to avoid needless intersection checks.
\iffalse
    Additionally, a method is developed to to losslessly and efficiently store the multiple impulse responses created by re-calculating
    the impulse responses for different points in time.
\fi
\newline
The goal of this research is to lay part of the groundwork required to allow accurate simulation of acoustics in moving rooms.
\newline
Three test cases are developed for this and compared to an implementation more akin to existing methods:
An empty scene with the sound receiver approaching the sound emitter at 1/9th the speed of sound,
a square room rapidly rotating
and a large, L-shaped room also rapidly rotating around one of its ends, with the receiver and emitter both sitting in said end.
\newline
Not within the scope of this thesis is development of a fully accurate simulator
including effects such as the differing bouncing behaviour sound waves show at different frequencies.
Only a proof of concept that shows that the idea of this new simulation method works is developed.
\newline
Side effects of moving scenes, such as sounds emitted by moving objects, are also discarded as they are irrelevant to
the changed intersection logic.
\newline
In the real world, rapid rotations such as the ones in the example scenes would create a centrifugal force,
which would lead to air pressure differing in different parts of the room,
in turn changing the behaviour of sound waves bouncing around the room.
Other rapid movements would create other forces and pressure gradients.
Exploring these changes requires further research and is outside the scope of this thesis.
In \autoref{sec:LRoom}, an example where the simulation without regard for pressure gradients falls short will be shown.
\newline
A note-worthy side effect that gets ignored is mass inertia:
The example case where this would become relevant is the inside of a linearly moving enclosed room, such as a driving car.
Due to mass inertia, sound waves travelling inside this moving room would behave the same as if the car stood still.
Since this effect is only relevant in a niche scenario and it can be simulated using a method that ignores movement entirely,
it can be ignored for this research.
\newline
Real-time applications cannot use this proposed method as it requires knowledge of objects' future movements ahead of time.
Further research is required to develop an alternative method for real-time or dynamic simulations.

\section{Outline}

In \autoref{ch:Fundamentals}, a basic outline on existing research and the general functionality of geometric acoustics simulation is given.
This includes a basic explanation of ray tracing as well as audio-specific aspects of it.
The following chapters cover new research based on these fundamentals.
\newline
% capitalisation workaround
\hyperref[ch:Intersection]{Chapter~\ref*{ch:Intersection}} then focuses on the expanded logic required to bounce rays through moving scenes.
This involves deriving new equations to check for intersections with moving objects.
The performance cost of these new checks is compared to that for static objects.
\newline
To alleviate part of this cost, in \autoref{ch:Chunks},
a commonly used optimisation that divides a scene into separate chunks
and only checks for intersections with objects in the relevant chunks is adapted to moving scenes.
This is done by separating objects not just by their position (the base for this type of optimisation in static scenes),
but also by the time at which they are at any given position.
\iffalse
    \newline
    irs ch5
\fi
\newline
For \autoref{ch:Evaluation}, a proof-of-concept implementation of the methods proposed in this thesis is developed
and compared to an implementation based on static scenes.
This evaluation is both looking at changes in simulation quality and performance from the static methods to the newly developed ones
as well as seeing where the logic proposed in this thesis still falls short and requires further research.
\newline
\hyperref[ch:Outlook]{Chapter~\ref*{ch:Outlook}} provides some insight into what further research could entail,
and how the simulation of moving scenes might need to be adapted in order to become realistic.
